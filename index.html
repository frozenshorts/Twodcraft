<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Test 1 bloc - Bedrock</title>
<style>
  html,body{height:100%;margin:0;background:#87ceeb;display:flex;align-items:center;justify-content:center;font-family:Inter,Arial}
  #game{display:block;border-radius:8px;box-shadow:0 10px 30px rgba(0,0,0,0.25)}
  #info{position:fixed;left:12px;top:12px;background:rgba(0,0,0,0.5);color:#fff;padding:8px 10px;border-radius:8px;font-size:14px}
  #controls{position:fixed;right:12px;top:12px}
  button{padding:8px 10px;border-radius:8px;border:0;background:#333;color:#fff}
</style>
</head>
<body>
<div id="info">Un seul bloc : <strong>bedrock.png</strong></div>
<canvas id="game" width="480" height="360"></canvas>
<div id="controls"><button id="reload">Recharger texture</button></div>

<script>
(() => {
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');
  ctx.imageSmoothingEnabled = false;

  // Taille du bloc en pixels
  const TILE = 120;

  // Position unique du bloc (on le placera au centre du canvas)
  const BLOCK = { x: Math.floor(canvas.width/2 - TILE/2), y: Math.floor(canvas.height/2 - TILE/2), type: 4 };

  // Couleur de secours pour bedrock (type 4 dans ton code)
  const colors = {
    4: "#2f2f2f"
  };

  // Chemin de l'image -> modifie si tu veux charger depuis le web
  const IMG_SRC = 'textures/bedrock.png';

  // Créer l'image
  let tex = new Image();
  tex.src = IMG_SRC;
  tex.onload = () => {
    console.log("✅ bedrock.png chargée");
    draw();
  };
  tex.onerror = (e) => {
    console.warn("⚠️ bedrock.png introuvable — affichage couleur de secours");
    draw(); // dessine la couleur de secours
  };

  // Dessin du fond simple puis du bloc unique
  function draw() {
    // fond (sky)
    ctx.fillStyle = '#87ceeb';
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // tracer un léger bord autour du bloc pour vérification
    ctx.strokeStyle = 'rgba(255,255,255,0.08)';
    ctx.lineWidth = 2;

    // si l'image est prête -> dessine l'image, sinon la couleur de secours
    if (tex && tex.complete && tex.naturalWidth > 0) {
      ctx.drawImage(tex, BLOCK.x, BLOCK.y, TILE, TILE);
      ctx.strokeRect(BLOCK.x + 0.5, BLOCK.y + 0.5, TILE-1, TILE-1);
    } else {
      ctx.fillStyle = colors[BLOCK.type] || '#2f2f2f';
      ctx.fillRect(BLOCK.x, BLOCK.y, TILE, TILE);
      ctx.strokeRect(BLOCK.x + 0.5, BLOCK.y + 0.5, TILE-1, TILE-1);
    }

    // petit label
    ctx.fillStyle = 'rgba(255,255,255,0.9)';
    ctx.font = '14px Arial';
    ctx.fillText('Bedrock (type 4)', BLOCK.x + 8, BLOCK.y + TILE - 10);
  }

  // bouton pour forcer rechargement (utile si tu ajoutes l'image après)
  document.getElementById('reload').addEventListener('click', () => {
    tex = new Image();
    tex.src = IMG_SRC + '?v=' + Date.now(); // bypass cache
    tex.onload = () => { console.log('✅ rechargée'); draw(); };
    tex.onerror = () => { console.warn('⚠️ toujours introuvable'); draw(); };
    draw(); // dessine état actuel tout de suite
  });

  // dessin initial immédiat (couleur secours si l'image n'a pas encore chargé)
  draw();
})();
</script>
</body>
</html>